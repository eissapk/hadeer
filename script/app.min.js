"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var MyApp=function(){function b(){_classCallCheck(this,b)}return _createClass(b,null,[{key:"global",value:function(){b.engine=document.getElementById("engine"),b.engineBtn=document.getElementById("engineBtn"),b.delBtn=document.getElementById("delBtn"),b.editBtn=document.getElementById("editBtn"),b.cancelBtn=document.getElementById("cancelBtn"),b.cancelBtn2=document.getElementById("cancelBtn2"),b.addBtn=document.getElementById("addBtn"),b.addAvatarBtn=document.getElementById("addAvatar"),b.file=document.getElementById("file"),b.suggestInput=document.getElementById("from-category-group"),b.toggle=!0,b.toggle2=!0}},{key:"getData",value:function(){var e=document.querySelectorAll(".dataHolder");return Array.from(e)}},{key:"fireEngine",value:function(e){var n=e.target.value.trim().toLowerCase(),t=document.getElementById("engineSuggest"),r=b.getData();t.innerHTML="";var a=r.map(function(e){if(e.getAttribute("data-name").toLowerCase().includes(n.slice(0,3))){var t=e.getAttribute("data-name");return"<li>".concat(t,"</li>")}}).join("");t.innerHTML=a,t.querySelectorAll("li").forEach(function(e){e.addEventListener("click",function(e){var t=e.target.textContent;document.getElementById("engine").value=t,document.getElementById("engineBtn").click(),document.getElementById("addCon").style.display="block"})}),0===n.length&&(t.innerHTML="",document.getElementById("previewData").style.display="none",document.getElementById("formCon").style.display="none",document.getElementById("conrolBtnsCon").style.display="none",document.getElementById("addCon").style.display="block",b.fileSrc="")}},{key:"searchItems",value:function(){var t=document.getElementById("engine").value.trim().toLowerCase(),e=b.getData(),n=document.getElementById("previewData"),r=n.querySelector("#categoryID"),a=n.querySelector("#imgCon img"),o=n.querySelector(".categoryName p"),l=n.querySelector(".categoryGroup p"),c=n.querySelector(".orderedQ p"),i=n.querySelector(".minQ p"),d=n.querySelector(".productDescription p"),u=n.querySelector(".minSalePrice p"),y=n.querySelector(".maxSalePrice p"),m=n.querySelector(".purchasingPrice p");r.textContent="",a.src="/hadeer/img/product.png",o.textContent="",l.textContent="",c.textContent="",i.textContent="",d.textContent="",u.textContent="",y.textContent="",m.textContent="";var s=e.filter(function(e){return e.getAttribute("data-name").toLowerCase().trim()===t});if(s.length){var g=function(e){return s[0].getAttribute(e)};b.currentItem=s[0],r.textContent="رقم الصنف ".concat(g("data-id")),o.textContent=g("data-name"),l.textContent=g("data-group"),c.textContent=g("data-orderedQ"),i.textContent=g("data-minQ"),d.textContent=g("data-desc"),u.textContent=g("data-minSalePrice"),y.textContent=g("data-maxSalePrice"),m.textContent=g("data-purchasingPrice"),""!=g("data-src")&&(a.src=g("data-src")),n.style.display="block",document.getElementById("formCon").style.display="none",document.getElementById("conrolBtnsCon").style.display="block"}else n.style.display="none",document.getElementById("formCon").style.display="none",document.getElementById("conrolBtnsCon").style.display="none"}},{key:"delItem",value:function(){confirm('هل انت متاكد من حذف هذا المنتج "'.concat(b.currentItem.getAttribute("data-name"),'" ؟'))&&(b.currentItem.remove(),b.engine.value="",document.getElementById("engineSuggest").innerHTML="",document.getElementById("previewData").style.display="none",document.getElementById("formCon").style.display="none",document.getElementById("conrolBtnsCon").style.display="none",document.getElementById("addCon").style.display="block")}},{key:"editItem",value:function(){var e=document.getElementById("conrolBtnsCon"),t=document.getElementById("previewData"),n=t.querySelector("#imgCon img"),r=t.querySelector(".categoryName p"),a=t.querySelector(".categoryGroup p"),o=t.querySelector(".orderedQ p"),l=t.querySelector(".minQ p"),c=t.querySelector(".productDescription p"),i=t.querySelector(".minSalePrice p"),d=t.querySelector(".maxSalePrice p"),u=t.querySelector(".purchasingPrice p"),y=document.getElementById("formCon"),m=y.querySelector("#avatar"),s=y.querySelector("#from-category-name"),g=y.querySelector("#from-category-group"),p=y.querySelector("#from-category-orderedQ"),v=y.querySelector("#from-category-minQ"),f=y.querySelector("#from-category-description"),B=y.querySelector("#from-category-minSalePrice"),E=y.querySelector("#from-category-maxSalePrice"),I=y.querySelector("#from-category-purchasingPrice");m.style.background="url(".concat(""==n.src?"/hadeer/img/product.png":n.src,") no-repeat 50%/cover"),s.value=r.textContent,g.value=a.textContent,p.value=o.textContent,v.value=l.textContent,f.value=c.textContent,B.value=i.textContent,E.value=d.textContent,I.value=u.textContent,t.style.display="none",e.style.display="none",document.getElementById("submitBtn2").style.display="none",document.getElementById("cancelBtn2").style.display="none",document.getElementById("submitBtn").style.display="inline-block",document.getElementById("cancelBtn").style.display="inline-block",y.style.display="block",window.scrollTo({top:0,left:0,behavior:"smooth"}),b.validateTextarea(),b.submitFunc(y,s,g,p,v,f,B,E,I)}},{key:"searchGroups",value:function(e){var n=e.target.value.trim().toLowerCase(),t=b.getData(),r=document.getElementById("fromGroupDropdown");r.innerHTML="",r.style.display="block";var a=t.map(function(e){if(e.getAttribute("data-group").toLowerCase().includes(n.slice(0,3))){var t=e.getAttribute("data-group");return"<li>".concat(t,"</li>")}}).join("");r.innerHTML=a,r.querySelectorAll("li").forEach(function(e){e.addEventListener("click",function(e){var t=e.target.textContent;document.getElementById("from-category-group").value=t,r.style.display="none"})})}},{key:"cancelItem",value:function(){var e=document.getElementById("formCon"),t=document.getElementById("previewData"),n=document.getElementById("conrolBtnsCon");e.style.display="none",t.style.display="block",n.style.display="block",b.fileSrc=""}},{key:"submitFunc",value:function(d,u,y,m,s,g,p,v,f){document.getElementById("myForm").addEventListener("submit",function(e){e.preventDefault();var t=_slicedToArray(document.querySelectorAll(".textareaValidity span"),2),n=t[0],r=t[1];if("block"==n.style.display&&"none"==r.style.display)if(b.toggle){var a=b.currentItem;a.setAttribute("data-src",""==b.fileSrc?a.getAttribute("data-src"):b.fileSrc),a.setAttribute("data-name",u.value),a.setAttribute("data-group",y.value),a.setAttribute("data-orderedQ",m.value),a.setAttribute("data-minQ",s.value),a.setAttribute("data-desc",g.value),a.setAttribute("data-minSalePrice",p.value),a.setAttribute("data-maxSalePrice",v.value),a.setAttribute("data-purchasingPrice",f.value),d.style.display="none",document.getElementById("engineSuggest").innerHTML="",document.getElementById("engine").value=u.value,document.getElementById("engineBtn").click(),console.log("1st form - edit item")}else{var o=document.getElementById("data"),l=document.createElement("input");l.type="hidden",l.className="dataHolder";var c=b.getData().map(function(e){return+e.getAttribute("data-id")}),i=Math.max.apply(Math,_toConsumableArray(c))+1;l.setAttribute("data-id",i),l.setAttribute("data-name",u.value),l.setAttribute("data-src",""==b.fileSrc?"/hadeer/img/product.png":b.fileSrc),l.setAttribute("data-group",y.value),l.setAttribute("data-orderedQ",m.value),l.setAttribute("data-minQ",s.value),l.setAttribute("data-desc",g.value),l.setAttribute("data-minSalePrice",p.value),l.setAttribute("data-maxSalePrice",v.value),l.setAttribute("data-purchasingPrice",f.value),b.toggle2&&(o.append(l),b.toggle2=!1),document.getElementById("myForm").reset(),document.getElementById("avatar").style.background="url(/hadeer/img/product.png) no-repeat 50%/cover",console.log("2nd form - add item")}b.fileSrc=""})}},{key:"addItem",value:function(){var e=document.getElementById("formCon"),t=document.getElementById("previewData"),n=document.getElementById("conrolBtnsCon");document.getElementById("myForm").reset(),document.getElementById("avatar").style.background="url(/hadeer/img/product.png) no-repeat 50%/cover",document.getElementById("addCon").style.display="none",t.style.display="none",n.style.display="none",document.getElementById("submitBtn").style.display="none",document.getElementById("cancelBtn").style.display="none",document.getElementById("submitBtn2").style.display="inline-block",document.getElementById("cancelBtn2").style.display="inline-block",e.style.display="block";var r=document.getElementById("formCon"),a=r.querySelector("#from-category-name"),o=r.querySelector("#from-category-group"),l=r.querySelector("#from-category-orderedQ"),c=r.querySelector("#from-category-minQ"),i=r.querySelector("#from-category-description"),d=r.querySelector("#from-category-minSalePrice"),u=r.querySelector("#from-category-maxSalePrice"),y=r.querySelector("#from-category-purchasingPrice");b.validateTextarea(),b.toggle2=!0,b.submitFunc(r,a,o,l,c,i,d,u,y)}},{key:"cancelItem2",value:function(){var e=document.getElementById("formCon"),t=document.getElementById("previewData"),n=document.getElementById("conrolBtnsCon");document.getElementById("addCon").style.display="block",t.style.display="none",n.style.display="none",e.style.display="none",document.getElementById("engine").value="",b.fileSrc=""}},{key:"uploadAvatar",value:function(){var e=document.getElementById("file").files[0],t=document.querySelector("#avatar"),n=new FileReader;b.fileSrc="",n.addEventListener("load",function(){t.style.background='url("'.concat(n.result,'") no-repeat center center/cover'),b.fileSrc=n.result},!1),e&&n.readAsDataURL(e)}},{key:"validateTextarea",value:function(){var e=document.getElementById("from-category-description"),n=e.nextElementSibling.querySelector(".textareaSuccess"),r=e.nextElementSibling.querySelector(".textareaError");n.style.display="none",r.style.display="block",e.addEventListener("input",function(e){var t=e.target.value.trim();2<=t.length&&t.length<=250?(n.style.display="block",r.style.display="none"):(n.style.display="none",r.style.display="block")});var t=e.value.trim();2<=t.length&&t.length<=250?(n.style.display="block",r.style.display="none"):(n.style.display="none",r.style.display="block")}}]),b}();MyApp.global(),MyApp.validateTextarea(),MyApp.engine.addEventListener("input",MyApp.fireEngine,!0),MyApp.engineBtn.addEventListener("click",MyApp.searchItems,!0),MyApp.engine.addEventListener("blur",function(){return setTimeout(function(){return document.getElementById("engineSuggest").style.display="none"},200)},!0),MyApp.engine.addEventListener("focus",function(){return document.getElementById("engineSuggest").style.display="block"},!0),MyApp.delBtn.addEventListener("click",MyApp.delItem,!0),MyApp.editBtn.addEventListener("click",MyApp.editItem,!0),MyApp.suggestInput.addEventListener("input",MyApp.searchGroups,!0),MyApp.suggestInput.addEventListener("blur",function(){return setTimeout(function(){return document.getElementById("fromGroupDropdown").style.display="none"},200)},!0),MyApp.cancelBtn.addEventListener("click",MyApp.cancelItem,!0),MyApp.addBtn.addEventListener("click",MyApp.addItem,!0),MyApp.cancelBtn2.addEventListener("click",MyApp.cancelItem2,!0),document.getElementById("submitBtn").addEventListener("click",function(){return MyApp.toggle=!0}),document.getElementById("submitBtn2").addEventListener("click",function(){MyApp.toggle=!1,MyApp.toggle2=!0}),MyApp.addAvatarBtn.addEventListener("click",function(){return document.getElementById("file").click()},!0),MyApp.file.addEventListener("change",MyApp.uploadAvatar,!0);
//# sourceMappingURL=../maps/app.min.js.map
